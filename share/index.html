<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BT | 陶成林</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/logo.ico">
    <meta name="description" content="vuepress">
    
    <link rel="preload" href="/assets/css/0.styles.b77c7604.css" as="style"><link rel="preload" href="/assets/js/app.66ef9ff8.js" as="script"><link rel="preload" href="/assets/js/2.f72d9393.js" as="script"><link rel="preload" href="/assets/js/11.a459fa8d.js" as="script"><link rel="prefetch" href="/assets/js/10.e0f159b3.js"><link rel="prefetch" href="/assets/js/12.3f4acf72.js"><link rel="prefetch" href="/assets/js/3.7796d6ca.js"><link rel="prefetch" href="/assets/js/4.43879640.js"><link rel="prefetch" href="/assets/js/5.3fa497cf.js"><link rel="prefetch" href="/assets/js/6.45c573e9.js"><link rel="prefetch" href="/assets/js/7.6d5512ae.js"><link rel="prefetch" href="/assets/js/8.a37bbdd3.js"><link rel="prefetch" href="/assets/js/9.afd5ae15.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b77c7604.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">陶成林</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/tech/" class="nav-link">
  技术
</a></div><div class="nav-item"><a href="/share/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  分享
</a></div><div class="nav-item"><a href="/about.html" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="https://github.com/taochenglin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/tech/" class="nav-link">
  技术
</a></div><div class="nav-item"><a href="/share/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  分享
</a></div><div class="nav-item"><a href="/about.html" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="https://github.com/taochenglin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/share/" aria-current="page" class="active sidebar-link">BT</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="bt"><a href="#bt" class="header-anchor">#</a> BT</h1> <p><strong>magnet</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>magnet:?xt=urn:btih:4D9FA761D69964B00DF0B3B0C9C1F968EA6C47D0&amp;xt=urn:ed2k:7655dbacff9395e579c4c9cb49cbec0e&amp;dn=bbb_sunflower_2160p_30fps_stereo_abl.mp4&amp;tr=udp%3a%2f%2ftracker.openbittorrent.com%3a80%2fannounce&amp;tr=udp%3a%2f%2ftracker.publicbt.com%3a80%2fannounce&amp;ws=http%3a%2f%2fdistribution.bbb3d.renderfarming.net%2fvideo%2fmp4%2fbbb_sunflower_2160p_30fps_stereo_abl.mp4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>magnet：协议名，和HTTP，FTP一样，BT下载中的一种协议。
xt ：exact topic的缩写，包含文件哈希值的统一资源名称。
btih：BitTorrent Info Hash的缩写，表示哈希方法名，这里还可以使用ED2K，
AICH，SHA1和MD5等。这个值是文件的标识符，是不可缺少的。
dn ：display name的缩写，表示向用户显示的文件名。这一项是选填的，由此可知，上面磁力链接的文件名是bbb_sunflower_2160p_30fps_stereo_abl.mp4
tr ：tracker的缩写，表示tracker服务器的地址。这一项也是选填的，即torrent文件中的torrent服务器。
ws : webseed的缩写，表示网络种子。
urn:(Uniform Resource Name, URN 表示资源名
btih：BitTorrent info hash，种子散列函数</p> <p>P2P客户端使用磁力链接，下载资源的种子文件，然后根据种子文件下载资源。</p> <p><strong>torrent，种子文件</strong></p> <p>torrent包含两部分内容，一是内容，即这个种子文件中包含什么内容，二是这个内容位置在哪，这个位置在哪并不是真实的内容位置，而是torrent服务器的地址，客户端软件（迅雷）连接上服务器地址后，服务器地址告诉迅雷，真正目标文件的IP，然后迅雷再去连接内容提供者的IP。
从这个过程中可以看到，torrent只是一个文件集合，它并不会告诉你你要真实下载的内容在哪里，需要torrent客户端再去服务器搜索一遍（虽然这个过程对普通使用者是透明的），如果不借助torrent客户端，你根本不知道.torrent文件里是啥。</p> <p><strong>DHT</strong></p> <p>DHT（Distributed Hash Table，分布式哈希表），DHT由节点组成，它存储peer的位置，是一种分布式存储方法。在不需要服务器的情况下，每个客户端负责一个小范围的路由，并负责存储一小部分数据，从而实现整个DHT网络的寻址和存储，其中BT客户端包含一个DHT节点，用来联系DHT中其他节点，从而得到peer的位置，进而通过BitTorrent协议下载。</p> <p><strong>Kademlia算法</strong></p> <p>Kademlia是DHT网络的一种实现。在Kademlia网络中，距离是通过异或(XOR)计算的，结果为无符号整数。distance(A, B) = |A xor B|，数值越小表示越近两个节点越接近。</p> <p><strong>KRPC协议</strong></p> <p>KRPC是节点之间的交互协议，是由B编码组成的一个简单的RPC结构，它使用UDP报文发送，一个独立的请求包发出去，然后由另一个独立的包来回复（这也是UDP无连接特性所决定的，所以协议中肯定也会有让我们区分报文包的方法），要注意的是这个协议没有重发机制。</p> <p><strong>MagNet协议</strong></p> <p>MagNet协议，也就是磁力链接。是一个通过sha1算法生成一个20字节长的字符串，P2P客户端使用磁力链接，下载资源的种子文件，然后根据种子文件下载资源。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>磁力链接，使用方式，打开迅雷，复制之后迅雷会自动识别。</p></div> <p><strong>冰海陷落</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>magnet:?xt=urn:btih:693153CE443E89835D3D324166D642C421A43ED0&amp;dn=%E5%86%B0%E6%B5%B7%E9%99%B7%E8%90%BD-BD1080P-MP4-%E4%B8%AD%E6%96%87%E5%AD%97%E5%B9%95-4.14GB.BT%E4%B8%96%E7%95%8C%E7%BD%91.www.btsj5.com.torrent&amp;tr=http%3A%2F%2F1337.abcvg.info%2Fannounce&amp;tr=http%3A%2F%2Ffxtt.ru%2Fannounce&amp;tr=http%3A%2F%2Fi-p-v-6.tk%3A6969%2Fannounce&amp;tr=http%3A%2F%2Fincine.ru%3A6969%2Fannounce&amp;tr=http%3A%2F%2Fipv6.1337.cx%3A6969%2Fannounce&amp;tr=http%3A%2F%2Fipv6.govt.hu%3A6969%2Fannounce&amp;tr=http%3A%2F%2Fnyaa.tracker.wf%3A7777%2Fannounce&amp;tr=http%3A%2F%2Fopen-v6.demonoid.ch%3A6969%2Fannounce&amp;tr=http%3A%2F%2Fopen.nyap2p.com%3A8080%2Fannounce&amp;tr=http%3A%2F%2Fopen.tracker.ink%3A6969%2Fannounce&amp;tr=http%3A%2F%2Fopentracker.xyz%2Fannounce&amp;tr=http%3A%2F%2Fshare.camoe.cn%3A8080%2Fannounce&amp;tr=http%3A%2F%2Ft.acg.rip%3A6699%2Fannounce&amp;tr=http%3A%2F%2Ft.nyaatracker.com%2Fannounce&amp;tr=http%3A%2F%2Ft.overflow.biz%3A6969%2Fannounce&amp;tr=http%3A%2F%2Ft.publictracker.xyz%3A6969%2Fannounce&amp;tr=http%3A%2F%2Ftracker.aeerso.space%3A6969%2Fannounce&amp;tr=http%3A%2F%2Ftracker.files.fm%3A6969%2Fannounce&amp;tr=http%3A%2F%2Ftracker.gbitt.info%2Fannounce&amp;tr=http%3A%2F%2Ftracker.ipv6tracker.ru%2Fannounce&amp;tr=http%3A%2F%2Ftracker.k.vu%3A6969%2Fannounce&amp;tr=https%3A%2F%2Fcarbon-bonsai-621.appspot.com%2Fannounce&amp;tr=https%3A%2F%2Fopentracker.i2p.rocks%2Fannounce&amp;tr=https%3A%2F%2Ftr.abiir.top%2Fannounce&amp;tr=https%3A%2F%2Ftr.burnabyhighstar.com%2Fannounce&amp;tr=https%3A%2F%2Ftr.ready4.icu%2Fannounce&amp;tr=https%3A%2F%2Ftracker.imgoingto.icu%2Fannounce&amp;tr=https%3A%2F%2Ftracker.lilithraws.cf%2Fannounce&amp;tr=https%3A%2F%2Ftracker.nanoha.org%2Fannounce&amp;tr=https%3A%2F%2Ftracker.tamersunion.org%2Fannounce&amp;tr=https%3A%2F%2Ftrackme.theom.nz%2Fannounce
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>007无暇赴死 No Time to Die</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>magnet:?xt=urn:btih:A0C173AF5265E681B03CE40039D48BD9058EB29B&amp;dn=007%EF%BC%9A%E6%97%A0%E6%9A%87%E8%B5%B4%E6%AD%BB-BD1080P-MP4-%E4%B8%AD%E6%96%87%E5%AD%97%E5%B9%95-7.41GB.BT%E4%B8%96%E7%95%8C%E7%BD%91.www.btsj5.com.torrent&amp;tr=http%3A%2F%2F1337.abcvg.info%2Fannounce&amp;tr=http%3A%2F%2Ffxtt.ru%2Fannounce&amp;tr=http%3A%2F%2Fi-p-v-6.tk%3A6969%2Fannounce&amp;tr=http%3A%2F%2Fincine.ru%3A6969%2Fannounce&amp;tr=http%3A%2F%2Fipv6.1337.cx%3A6969%2Fannounce&amp;tr=http%3A%2F%2Fipv6.govt.hu%3A6969%2Fannounce&amp;tr=http%3A%2F%2Fnyaa.tracker.wf%3A7777%2Fannounce&amp;tr=http%3A%2F%2Fopen-v6.demonoid.ch%3A6969%2Fannounce&amp;tr=http%3A%2F%2Fopen.nyap2p.com%3A8080%2Fannounce&amp;tr=http%3A%2F%2Fopen.tracker.ink%3A6969%2Fannounce&amp;tr=http%3A%2F%2Fopentracker.xyz%2Fannounce&amp;tr=http%3A%2F%2Fshare.camoe.cn%3A8080%2Fannounce&amp;tr=http%3A%2F%2Ft.acg.rip%3A6699%2Fannounce&amp;tr=http%3A%2F%2Ft.nyaatracker.com%2Fannounce&amp;tr=http%3A%2F%2Ft.overflow.biz%3A6969%2Fannounce&amp;tr=http%3A%2F%2Ft.publictracker.xyz%3A6969%2Fannounce&amp;tr=http%3A%2F%2Ftracker.aeerso.space%3A6969%2Fannounce&amp;tr=http%3A%2F%2Ftracker.files.fm%3A6969%2Fannounce&amp;tr=http%3A%2F%2Ftracker.gbitt.info%2Fannounce&amp;tr=http%3A%2F%2Ftracker.ipv6tracker.ru%2Fannounce&amp;tr=http%3A%2F%2Ftracker.k.vu%3A6969%2Fannounce&amp;tr=https%3A%2F%2Fcarbon-bonsai-621.appspot.com%2Fannounce&amp;tr=https%3A%2F%2Fopentracker.i2p.rocks%2Fannounce&amp;tr=https%3A%2F%2Ftr.abiir.top%2Fannounce&amp;tr=https%3A%2F%2Ftr.burnabyhighstar.com%2Fannounce&amp;tr=https%3A%2F%2Ftr.ready4.icu%2Fannounce&amp;tr=https%3A%2F%2Ftracker.imgoingto.icu%2Fannounce&amp;tr=https%3A%2F%2Ftracker.lilithraws.cf%2Fannounce&amp;tr=https%3A%2F%2Ftracker.nanoha.org%2Fannounce&amp;tr=https%3A%2F%2Ftracker.tamersunion.org%2Fannounce&amp;tr=https%3A%2F%2Ftrackme.theom.nz%2Fannounce
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.66ef9ff8.js" defer></script><script src="/assets/js/2.f72d9393.js" defer></script><script src="/assets/js/11.a459fa8d.js" defer></script>
  </body>
</html>
